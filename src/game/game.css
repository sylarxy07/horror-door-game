*{box-sizing:border-box}
html,body,#root{margin:0;height:100%;background:#070a10}
body{font-family:Inter,system-ui,Arial,sans-serif;color:#eef2fb}
.app{min-height:100vh;background:#070a10;color:#eef2fb;position:relative;overflow:hidden}
.screen{min-height:100vh;display:grid;grid-template-rows:auto 1fr auto;gap:10px;padding:10px}
.panel{border:1px solid rgba(255,255,255,.08);background:rgba(10,13,19,.72);border-radius:16px;backdrop-filter:blur(6px)}
.hud{display:flex;justify-content:space-between;gap:10px;align-items:flex-start;padding:10px 12px}
.hudTitle{font-weight:800;font-size:15px}
.hudSub{font-size:11px;letter-spacing:.12em;text-transform:uppercase;color:rgba(238,242,251,.65)}
.pills{display:flex;gap:8px;flex-wrap:wrap;justify-content:flex-end}
.pill{padding:7px 10px;border-radius:999px;border:1px solid rgba(255,255,255,.1);background:rgba(255,255,255,.03);font-size:12px;font-weight:700}
.pill.red{border-color:rgba(255,60,70,.22);background:rgba(160,20,30,.16)}
.pill.good{border-color:rgba(70,190,110,.22);background:rgba(24,110,50,.12)}
.hint{padding:10px 12px;display:grid;gap:8px}
.hintLabel{font-size:11px;letter-spacing:.12em;text-transform:uppercase;color:rgba(238,242,251,.65)}
.hintText{font-size:13px;line-height:1.4}
.smallText{font-size:12px;color:rgba(238,242,251,.83)}
.muted{font-size:12px;color:rgba(238,242,251,.66)}
.divider{height:1px;background:rgba(255,255,255,.06)}
.world{position:relative;min-height:420px;border-radius:18px;overflow:hidden;border:1px solid rgba(255,255,255,.08);background:#0c1119}
.worldSurface{position:absolute;inset:0;transform:translate3d(0,0,0)}
.btn{border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.04);color:#eef2fb;border-radius:12px;padding:10px 12px;font-weight:700;cursor:pointer}
.btn:hover{background:rgba(255,255,255,.07)}
.btn:disabled{opacity:.55;cursor:not-allowed}
.danger{background:rgba(160,20,30,.28);border-color:rgba(255,70,80,.22)}
.wide{width:100%;display:flex;justify-content:center}
.ghost{background:transparent}
.menuBg,.bgBasic{
  position:absolute;inset:0;
  background:
    radial-gradient(circle at 75% 18%, rgba(255,42,42,.10), transparent 22%),
    radial-gradient(circle at 18% 20%, rgba(120,150,190,.12), transparent 30%),
    linear-gradient(to bottom, #141b26, #0f141d 45%, #090c12);
  z-index:0;
}
.menuWrap{min-height:100vh;display:grid;place-items:center;padding:24px 16px;position:relative}
.menuCard{
  position:relative;z-index:1;
  width:min(520px,100%);
  padding:22px 20px;
  display:grid;gap:18px;
}
.menuContent{display:grid;gap:18px}
.menuHero{text-align:center}
.menuLogo{
  margin:0;
  font-size:clamp(28px,6.5vw,44px);
  letter-spacing:.32em;
  text-transform:uppercase;
  text-indent:.32em;
}
.title{margin:0;font-size:clamp(24px,5vw,34px);line-height:1.05}
.sub{font-size:14px;line-height:1.45;color:rgba(238,242,251,.78)}
.preview{height:190px;border:1px solid rgba(255,255,255,.08);border-radius:14px;position:relative;overflow:hidden;background:linear-gradient(to bottom,#253347,#161f2b 48%, #0e141c)}
.preview::before{content:"";position:absolute;inset:-8%;filter:blur(14px);
  background:
    radial-gradient(circle at 20% 45%, rgba(235,240,248,.10), transparent 34%),
    radial-gradient(circle at 75% 30%, rgba(235,240,248,.06), transparent 28%);
  animation:fogMove 10s ease-in-out infinite alternate;}
.preview .red{position:absolute;top:18%;right:14%;width:10px;height:10px;border-radius:50%;background:#ff2a2a;box-shadow:0 0 12px rgba(255,42,42,.45);animation:blink 1.1s infinite}
.preview .door{position:absolute;left:50%;bottom:12%;transform:translateX(-50%);width:min(58%,220px);height:90px;border-radius:12px 12px 8px 8px;border:1px solid rgba(255,255,255,.1);background:linear-gradient(to bottom,#202734,#121721)}
.menuSections{display:grid;gap:14px}
.menuSection{border-radius:14px;border:1px solid rgba(255,255,255,.08);background:rgba(8,11,16,.78);padding:12px 12px 10px;display:grid;gap:8px}
.menuSectionLabel{font-size:12px;letter-spacing:.16em;text-transform:uppercase;color:rgba(238,242,251,.8)}
.menuSectionBody{display:grid;gap:6px}
.menuMainButtons{gap:8px}
.menuMainButton{font-size:15px}
.settingsHeader{display:flex;justify-content:space-between;gap:10px;align-items:center;flex-wrap:wrap}
.settingsTabs{display:flex;gap:6px;flex-wrap:wrap;margin-top:8px}
.settingsTab{flex:1 1 0;border-radius:999px;border:1px solid rgba(255,255,255,.08);background:rgba(255,255,255,.03);padding:7px 10px;font-size:12px;font-weight:600;cursor:pointer;color:#eef2fb;text-align:center}
.settingsTab.active{border-color:rgba(255,70,80,.22);background:rgba(160,20,30,.25)}
.settingsBody{margin-top:8px;display:grid;gap:10px}
.settingsGroup{border-radius:12px;border:1px solid rgba(255,255,255,.06);background:rgba(255,255,255,.02);padding:10px;display:grid;gap:10px}
.settingsField{display:grid;gap:6px}
.settingsLabel{font-size:12px;font-weight:600}
.settingsSelect{border-radius:10px;border:1px solid rgba(255,255,255,.15);background:rgba(8,11,16,.9);color:#eef2fb;padding:7px 9px;font-size:13px}
.settingsCheckboxRow{display:flex;align-items:center;gap:8px;font-size:13px}
.settingsCheckboxRow input{accent-color:#ff2a2a}
.settingsHelp{font-size:11px;color:rgba(238,242,251,.7)}
.settingsFooter{margin-top:2px;font-size:11px}
.introStage{position:relative;overflow:hidden}
.introArt{position:absolute;inset:0;background:
  radial-gradient(circle at 70% 20%, rgba(255,42,42,.10), transparent 18%),
  linear-gradient(to bottom,#202c3b,#121923 50%,#0e1219)}
.introFog{position:absolute;inset:-8%;filter:blur(14px);background:
  radial-gradient(circle at 25% 50%, rgba(235,240,248,.09), transparent 32%),
  radial-gradient(circle at 75% 38%, rgba(235,240,248,.06), transparent 30%);
  animation:fogMove 11s ease-in-out infinite alternate;}
.introBox{position:absolute;left:12px;right:12px;bottom:12px;z-index:2;padding:12px;border-radius:14px;border:1px solid rgba(255,255,255,.08);background:rgba(8,11,16,.72);display:grid;gap:10px}
.rowEnd{display:flex;gap:8px;justify-content:flex-end;flex-wrap:wrap}

/* BEACH */
.beachSky{
  position:absolute; inset:0;
  background:
    radial-gradient(circle at 84% 15%, rgba(255,42,42,.07), transparent 18%),
    radial-gradient(circle at 14% 18%, rgba(120,150,180,.14), transparent 28%),
    linear-gradient(to bottom,#263548 0%, #172130 48%, #101722 70%, #0d121a 100%);
}
.beachHorizonGlow{
  position:absolute; left:15%; right:15%; top:14%;
  height:16%; border-radius:50%;
  background:radial-gradient(circle, rgba(255,42,42,.08), transparent 70%);
  filter:blur(16px); opacity:.9;
}
.seaBands{
  position:absolute; inset:auto 0 0 0; height:40%; opacity:.7;
  background:
    linear-gradient(to top, rgba(14,19,28,.95), rgba(16,22,30,.75) 40%, rgba(20,30,40,.35) 75%, transparent),
    repeating-linear-gradient(to top,
      rgba(120,150,170,.04) 0 2px,
      rgba(0,0,0,0) 2px 10px);
}
.fogLayer{
  position:absolute; inset:-10%; filter:blur(14px); pointer-events:none; z-index:12;
  background:
    radial-gradient(circle at 20% 25%, rgba(230,235,245,.10), transparent 34%),
    radial-gradient(circle at 70% 40%, rgba(230,235,245,.06), transparent 30%),
    radial-gradient(circle at 40% 80%, rgba(230,235,245,.05), transparent 28%);
  animation:fogMove 12s ease-in-out infinite alternate;
}
.beachPerspective{position:absolute; inset:0; z-index:3; overflow:hidden; perspective:900px}
.walkway{
  position:absolute; left:50%; bottom:-4%; width:min(84vw,460px); height:92%;
  transform:translateX(-50%) rotateX(63deg);
  transform-origin:center bottom; border-radius:20px;
  background:
    linear-gradient(to right, rgba(0,0,0,.48), transparent 10%, transparent 90%, rgba(0,0,0,.48)),
    linear-gradient(to bottom, rgba(255,255,255,.02), rgba(0,0,0,.28) 45%, rgba(0,0,0,.42));
  border:1px solid rgba(255,255,255,.07); box-shadow:0 24px 40px rgba(0,0,0,.35);
}
.walkway::before{
  content:""; position:absolute; inset:0;
  background:
    repeating-linear-gradient(to bottom, rgba(255,255,255,.10) 0 10px, transparent 10px 28px),
    radial-gradient(circle at 20% 16%, rgba(255,255,255,.02), transparent 10%),
    radial-gradient(circle at 80% 36%, rgba(255,255,255,.02), transparent 10%);
  opacity:.32;
}
.walkwayEdgeL, .walkwayEdgeR{
  position:absolute; bottom:6%; top:26%; width:2px; z-index:4; opacity:.28;
  background:linear-gradient(to top, rgba(255,255,255,.12), rgba(255,255,255,.04));
}
.walkwayEdgeL{left:calc(50% - min(35vw,190px))}
.walkwayEdgeR{right:calc(50% - min(35vw,190px))}
.horizonRedDot{
  position:absolute; left:50%; top:17%; width:9px; height:9px; border-radius:50%;
  background:#ff2a2a; transform:translateX(-50%); box-shadow:0 0 14px rgba(255,42,42,.45);
  animation:blink 1.2s infinite; z-index:6;
}

.worldMarker{
  position:absolute; z-index:8; border-radius:50%;
  display:grid; place-items:center;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(10,14,20,.92); color:#eef2fb;
  box-shadow:0 10px 18px rgba(0,0,0,.25); user-select:none; pointer-events:none;
}
.worldMarker::after{
  content:""; position:absolute; inset:-6px; border-radius:50%;
  border:1px solid rgba(255,255,255,.05); opacity:.35;
}
.worldMarker.solved{border-color:rgba(70,190,110,.34); background:rgba(10,24,18,.9)}
.worldMarker.current{animation:objPulse 1.1s infinite ease-in-out}
.worldMarkerLabel{
  position:absolute; z-index:7; transform:translate(-50%,-100%);
  font-size:10px; white-space:nowrap; padding:3px 6px; border-radius:999px;
  border:1px solid rgba(255,255,255,.07); background:rgba(8,11,16,.52);
  color:rgba(238,242,251,.8); pointer-events:none;
}

.sidePost{
  position:absolute; z-index:6; pointer-events:none;
  border-radius:6px;
  background:linear-gradient(to bottom, rgba(210,220,235,.22), rgba(120,130,145,.12) 30%, rgba(0,0,0,.35) 100%);
  border:1px solid rgba(255,255,255,.06);
  box-shadow:0 10px 14px rgba(0,0,0,.22);
}
.sidePostCap{
  position:absolute; left:50%; transform:translateX(-50%);
  border-radius:999px;
  background:rgba(255,255,255,.08);
  border:1px solid rgba(255,255,255,.05);
}
.sidePostShadow{
  position:absolute; z-index:5; pointer-events:none;
  border-radius:999px; filter:blur(4px);
  background:rgba(0,0,0,.28);
}

.tunnelPortalWorld{
  position:absolute; z-index:7; border-radius:14px 14px 8px 8px;
  border:1px solid rgba(255,255,255,.1);
  background:linear-gradient(to bottom,#212835,#141a23 70%, #10151c);
  box-shadow:0 14px 24px rgba(0,0,0,.35); pointer-events:none;
}
.tunnelPortalWorld::before{
  content:""; position:absolute; left:50%; top:10%; transform:translateX(-50%);
  width:38%; height:10%; border-radius:999px; background:#ff2a2a;
  opacity:.25; box-shadow:0 0 10px rgba(255,42,42,.35);
}
.tunnelPortalWorld.active::before{opacity:1; animation:blink 1.1s infinite}

.beachOverlay{position:absolute; inset:0; z-index:20; pointer-events:none}
.goalBeacon{
  position:absolute; left:50%; top:12px; transform:translateX(-50%);
  display:flex; align-items:center; gap:8px; padding:8px 10px; border-radius:12px;
  border:1px solid rgba(255,60,70,.16); background:rgba(20,8,10,.5);
  font-size:12px; pointer-events:none;
}
.goalDot{width:8px;height:8px;border-radius:50%;background:#ff3a3a;animation:blink 1.1s infinite}
.goalArrow{display:inline-block;font-weight:900;animation:arrowUp 1.1s infinite ease-in-out}
.interactPop{
  position:absolute; left:50%; bottom:104px; transform:translateX(-50%);
  padding:7px 10px; border-radius:10px; border:1px solid rgba(255,255,255,.08);
  background:rgba(8,11,16,.62); font-size:12px; white-space:nowrap;
}

/* Tamay back view */
.tamayRig{
  position:absolute; left:50%; bottom:8%;
  width:170px; height:150px; z-index:16; pointer-events:none;
  filter:drop-shadow(0 10px 18px rgba(0,0,0,.45));
  will-change:transform;
}
.tamayRig .shadow{
  position:absolute; left:50%; bottom:12px; transform:translateX(-50%);
  width:92px; height:18px; border-radius:999px; filter:blur(4px);
  background:rgba(0,0,0,.46);
}
.tamayRig .torso{
  position:absolute; left:50%; bottom:26px; transform:translateX(-50%);
  width:78px; height:72px; border-radius:28px 28px 18px 18px;
  background:linear-gradient(to bottom, #141b29, #0d121b 65%, #0b0f16);
  border:1px solid rgba(255,255,255,.05);
}
.tamayRig .hood{
  position:absolute; left:50%; bottom:84px; transform:translateX(-50%);
  width:66px; height:46px; border-radius:34px 34px 24px 24px;
  background:linear-gradient(to bottom, #1a2335, #101722 70%);
  border:1px solid rgba(255,255,255,.05);
}
.tamayRig .hair{
  position:absolute; left:50%; bottom:102px; transform:translateX(-50%);
  width:32px; height:18px; border-radius:12px 12px 10px 10px;
  background:#0b0f16; opacity:.95;
  clip-path:polygon(0 0,100% 0,100% 52%,74% 72%,55% 100%,40% 72%,20% 86%,0 58%);
}
.tamayRig .shoulderL,.tamayRig .shoulderR{
  position:absolute; bottom:70px; width:34px; height:22px; border-radius:20px;
  background:#111826; opacity:.92;
}
.tamayRig .shoulderL{ left:38px; transform:rotate(-15deg)}
.tamayRig .shoulderR{ right:38px; transform:rotate(15deg)}
.tamayRig .armL,.tamayRig .armR{
  position:absolute; bottom:46px; width:16px; height:44px; border-radius:12px;
  background:#0f1520; transform-origin:top center;
}
.tamayRig .armL{ left:44px }
.tamayRig .armR{ right:44px }
.tamayRig .legL,.tamayRig .legR{
  position:absolute; bottom:16px; width:18px; height:40px; border-radius:12px;
  background:#0b0f16; transform-origin:top center;
}
.tamayRig .legL{ left:66px }
.tamayRig .legR{ right:66px }
.tamayRig.walking .armL{ animation:walkA1 .28s infinite ease-in-out }
.tamayRig.walking .armR{ animation:walkA2 .28s infinite ease-in-out }
.tamayRig.walking .legL{ animation:walk1 .28s infinite ease-in-out }
.tamayRig.walking .legR{ animation:walk2 .28s infinite ease-in-out }
.tamayRig.walking .torso{ animation:bob .28s infinite ease-in-out }

.beachControls{
  position:absolute; left:10px; right:10px; bottom:10px; z-index:28;
  display:flex; justify-content:space-between; align-items:flex-end; gap:10px; pointer-events:none
}
.pad{display:flex; flex-direction:column; gap:8px; pointer-events:auto}
.moveBtn{
  width:56px; height:56px; border-radius:14px;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(8,11,16,.62); color:#eef2fb;
  font-size:20px; font-weight:800; cursor:pointer;
  touch-action:none; user-select:none;
}
.beachActionCol{display:flex; flex-direction:column; align-items:flex-end; gap:8px; pointer-events:auto}
.miniBadge{
  font-size:11px; color:rgba(238,242,251,.78);
  border:1px solid rgba(255,255,255,.08); background:rgba(8,11,16,.55);
  border-radius:10px; padding:7px 9px
}
.journalBtnRow{display:flex;justify-content:space-between;align-items:center;gap:8px}
.journalGrid{display:grid;grid-template-columns:repeat(5,minmax(0,1fr));gap:8px}
.journalItem{
  border:1px solid rgba(255,255,255,.07);background:rgba(255,255,255,.02);
  border-radius:10px;padding:8px;display:grid;gap:4px;
}
.journalItem.done{border-color:rgba(70,190,110,.22);background:rgba(24,110,50,.07)}
.journalLabel{font-weight:700;font-size:12px}
.journalState{font-size:11px;color:rgba(238,242,251,.72)}

/* TUNNEL */
.tunnelBg{position:absolute;inset:0;background:linear-gradient(to bottom,#141a23,#10141b 45%,#0b0e14)}
.tunnelPerspective{
  position:absolute; inset:0; overflow:hidden;
  background:radial-gradient(circle at 50% 28%, rgba(255,42,42,.08), transparent 20%);
}
.tunnelCeil{
  position:absolute; left:50%; top:-8%; transform:translateX(-50%) rotateX(65deg);
  width:min(95vw,680px); height:34%;
  border:1px solid rgba(255,255,255,.06);
  background:linear-gradient(to bottom, rgba(255,255,255,.03), rgba(0,0,0,.18)); opacity:.85;
}
.tunnelFloor{
  position:absolute; left:50%; bottom:-12%; transform:translateX(-50%) rotateX(68deg);
  width:min(95vw,680px); height:50%;
  border:1px solid rgba(255,255,255,.06);
  background:
    linear-gradient(to bottom, rgba(255,255,255,.02), rgba(0,0,0,.35)),
    repeating-linear-gradient(to bottom, rgba(255,255,255,.08) 0 8px, transparent 8px 22px);
  opacity:.9;
}
.wallL,.wallR{
  position:absolute; top:8%; bottom:14%; width:33%;
  background:linear-gradient(to bottom, rgba(255,255,255,.02), rgba(0,0,0,.18));
  border:1px solid rgba(255,255,255,.05);
}
.wallL{ left:-7%; transform:skewY(8deg) }
.wallR{ right:-7%; transform:skewY(-8deg) }
.redLamp{
  position:absolute; left:50%; top:14%; transform:translateX(-50%);
  width:14px; height:14px; border-radius:50%;
  background:#ff2a2a; box-shadow:0 0 16px rgba(255,42,42,.45);
  animation:blink 1.2s infinite; z-index:5;
}
.metalDoor{
  position:absolute; left:50%; bottom:16%;
  transform:translateX(-50%);
  width:min(58vw,250px); height:min(42vh,300px);
  border-radius:14px 14px 10px 10px;border:1px solid rgba(255,255,255,.12);
  background:linear-gradient(95deg, rgba(255,255,255,.06), rgba(0,0,0,.12)), linear-gradient(to bottom,#202733,#151a23 60%, #12161d);
  display:grid;align-content:end;justify-items:center;padding-bottom:16px;cursor:pointer; z-index:6;
  box-shadow:0 24px 28px rgba(0,0,0,.35);
}
.metalDoor:hover{filter:brightness(1.05)}
.metalDoor::before{
  content:"";position:absolute;left:50%;top:18%;transform:translateX(-50%);
  width:54px;height:18px;border-radius:999px;border:1px solid rgba(255,255,255,.12);
  background:radial-gradient(circle at 52% 50%, rgba(255,50,50,.85) 0 9%, rgba(255,50,50,.28) 10% 22%, rgba(0,0,0,.35) 23% 100%)
}
.metalDoor::after{
  content:"";position:absolute;right:16px;top:52%;width:14px;height:38px;border-radius:999px;background:linear-gradient(to bottom,#6e7681,#444c57)
}
.tunnelPlayer{
  position:absolute; left:50%; bottom:2%; transform:translateX(-50%);
  width:190px; height:120px; z-index:7; pointer-events:none; opacity:.95;
}
.tunnelPlayer .shoulders{
  position:absolute; left:50%; bottom:0; transform:translateX(-50%);
  width:150px; height:58px; border-radius:38px 38px 12px 12px;
  background:linear-gradient(to bottom,#131a28,#0b111a);
  border:1px solid rgba(255,255,255,.04);
  box-shadow:0 -8px 22px rgba(0,0,0,.35) inset;
}
.tunnelPlayer .hood{
  position:absolute; left:50%; bottom:44px; transform:translateX(-50%);
  width:78px; height:52px; border-radius:38px 38px 18px 18px;
  background:linear-gradient(to bottom,#192335,#101722);
  border:1px solid rgba(255,255,255,.04);
}
.tunnelPlayer .hair{
  position:absolute; left:50%; bottom:70px; transform:translateX(-50%);
  width:36px; height:16px; border-radius:12px; background:#0b0f16;
  clip-path:polygon(0 0,100% 0,100% 55%,80% 82%,60% 100%,42% 70%,22% 88%,0 62%);
}

/* DOOR GAME */
.gameBg{
  position:absolute; inset:0;
  background:
    radial-gradient(circle at 50% 10%, rgba(255,42,42,.08), transparent 20%),
    linear-gradient(to bottom,#1a2230,#121923 48%, #0c1118);
}
.roomPerspective{position:absolute; inset:0; overflow:hidden}
.roomFloor{
  position:absolute; left:50%; bottom:-12%;
  transform:translateX(-50%) rotateX(70deg);
  width:min(102vw,760px); height:58%;
  border:1px solid rgba(255,255,255,.06);
  background:
    linear-gradient(to bottom, rgba(255,255,255,.02), rgba(0,0,0,.36)),
    repeating-linear-gradient(to bottom, rgba(255,255,255,.08) 0 8px, transparent 8px 24px);
  opacity:.9;
}
.roomBackWall{
  position:absolute; left:50%; top:9%; transform:translateX(-50%);
  width:min(88vw,640px); height:52%;
  border:1px solid rgba(255,255,255,.06);
  background:
    linear-gradient(to bottom, rgba(255,255,255,.03), rgba(0,0,0,.18)),
    linear-gradient(to right, rgba(0,0,0,.35), transparent 10%, transparent 90%, rgba(0,0,0,.35));
  border-radius:8px; box-shadow:0 22px 28px rgba(0,0,0,.25);
}
.roomWallL,.roomWallR{
  position:absolute; top:12%; bottom:18%; width:24%;
  border:1px solid rgba(255,255,255,.05);
  background:linear-gradient(to bottom, rgba(255,255,255,.02), rgba(0,0,0,.14));
}
.roomWallL{ left:-3%; transform:skewY(9deg) }
.roomWallR{ right:-3%; transform:skewY(-9deg) }
.doorsWall{
  position:absolute; left:50%; top:13%; transform:translateX(-50%);
  width:min(82vw,600px); height:46%;
  display:grid; grid-template-columns:repeat(5,minmax(0,1fr)); gap:8px;
  align-items:end; z-index:5; padding:6px;
}
.door{
  position:relative; min-height:150px;
  border-radius:14px 14px 10px 10px;
  border:1px solid rgba(255,255,255,.1);
  background:linear-gradient(95deg, rgba(255,255,255,.04), rgba(0,0,0,.1)), linear-gradient(to bottom,#202733,#131821);
  color:#eef2fb; display:grid; align-items:end; padding:8px;
  cursor:pointer; box-shadow:0 10px 18px rgba(0,0,0,.22); transform-origin:bottom center;
}
.door:nth-child(1){ transform:perspective(700px) rotateY(10deg) }
.door:nth-child(2){ transform:perspective(700px) rotateY(5deg) }
.door:nth-child(3){ transform:perspective(700px) rotateY(0deg) }
.door:nth-child(4){ transform:perspective(700px) rotateY(-5deg) }
.door:nth-child(5){ transform:perspective(700px) rotateY(-10deg) }
.door:hover{filter:brightness(1.03)}
.door::before{content:"";position:absolute;left:50%;top:18%;transform:translateX(-50%);width:14px;height:14px;border-radius:50%;background:rgba(255,255,255,.08)}
.door::after{content:"";position:absolute;right:10px;top:56%;width:10px;height:28px;border-radius:999px;background:linear-gradient(to bottom,#707884,#444b56)}
.door.selected{border-color:rgba(255,255,255,.25)}
.door.safe{border-color:rgba(70,190,110,.3);background:linear-gradient(95deg, rgba(70,190,110,.1), rgba(0,0,0,.1)), linear-gradient(to bottom,#21362a,#131c17)}
.door.monster{border-color:rgba(255,60,70,.22);background:linear-gradient(95deg, rgba(255,60,70,.09), rgba(0,0,0,.1)), linear-gradient(to bottom,#2a1e22,#191216)}
.door.curse{border-color:rgba(170,85,255,.24);background:linear-gradient(95deg, rgba(170,85,255,.1), rgba(0,0,0,.1)), linear-gradient(to bottom,#281f35,#17131f)}
.doorLabel{
  position:relative; z-index:2; text-align:center; padding:8px 6px;
  border-radius:10px; border:1px solid rgba(255,255,255,.06);
  background:rgba(6,9,14,.35); font-size:12px; font-weight:700
}
.playerShoulderOverlay{
  position:absolute; left:50%; bottom:-4px; transform:translateX(-50%);
  width:min(88vw,540px); height:120px; z-index:6; pointer-events:none;
}
.playerShoulderOverlay::before{
  content:""; position:absolute; left:50%; bottom:0; transform:translateX(-50%);
  width:220px; height:78px; border-radius:50px 50px 14px 14px;
  background:linear-gradient(to bottom,#121a28,#0a1018);
  border:1px solid rgba(255,255,255,.04); opacity:.95;
}
.playerShoulderOverlay::after{
  content:""; position:absolute; left:50%; bottom:58px; transform:translateX(-50%);
  width:86px; height:54px; border-radius:40px 40px 18px 18px;
  background:linear-gradient(to bottom,#1a2436,#101722);
  border:1px solid rgba(255,255,255,.04); opacity:.95;
}

.centerWrap{min-height:100vh;display:grid;place-items:center;padding:14px;position:relative}
.centerCard{position:relative;z-index:1;width:min(560px,100%);padding:16px;display:grid;gap:12px}
.stats{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:8px}
.stat{border:1px solid rgba(255,255,255,.08);background:rgba(255,255,255,.03);border-radius:12px;padding:10px}
.stat .k{font-size:11px;letter-spacing:.1em;text-transform:uppercase;color:rgba(238,242,251,.62)}
.stat .v{font-size:16px;font-weight:800}

.modalBack{position:fixed;inset:0;z-index:80;display:grid;place-items:center;background:rgba(0,0,0,.45);backdrop-filter:blur(4px);padding:12px}
.modal{width:min(640px,100%);border-radius:16px;border:1px solid rgba(255,255,255,.1);background:rgba(9,12,17,.95);overflow:hidden}
.modalHead{display:flex;justify-content:space-between;gap:10px;align-items:center;padding:12px 14px;border-bottom:1px solid rgba(255,255,255,.06)}
.modalBody{padding:14px}
.puzzleWrap{display:grid;gap:10px}
.box{border:1px solid rgba(255,255,255,.07);background:rgba(255,255,255,.02);border-radius:12px;padding:10px}
.grid2{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:8px}
.grid3{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:8px}
.pinRow{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:8px}
.pinCell{height:42px;border-radius:10px;border:1px solid rgba(255,255,255,.09);background:rgba(255,255,255,.03);display:grid;place-items:center;font-size:18px;font-weight:800}
.puzzleLore{border:1px solid rgba(255,255,255,.08);background:rgba(255,255,255,.02);border-radius:12px;padding:10px;display:grid;gap:8px}
.puzzleLoreTitle{font-size:13px;font-weight:800}
.puzzleLoreText{font-size:13px;line-height:1.45}
.feedback{margin-top:10px;border:1px solid rgba(255,255,255,.07);background:rgba(255,255,255,.02);border-radius:10px;padding:8px 10px;font-size:12px}

.fade{position:fixed;inset:0;z-index:95;background:#000;pointer-events:none;opacity:0;transition:opacity .5s ease}
.fade.on{opacity:1}
.hit{
  position:fixed;inset:0;z-index:90;pointer-events:none;opacity:0;transition:opacity .14s ease;
  background:
    radial-gradient(circle at 50% 55%, rgba(0,0,0,0) 0%, rgba(0,0,0,.20) 42%, rgba(0,0,0,.6) 100%),
    linear-gradient(to bottom, rgba(140,0,10,.18), rgba(0,0,0,.2))
}
.hit.on1{opacity:.55}
.hit.on2{opacity:.88}

.shake1{animation:shake1 .16s linear}
.shake2{animation:shake2 .28s linear}

@keyframes blink{
  0%,100%{opacity:.25; box-shadow:0 0 8px rgba(255,42,42,.35)}
  50%{opacity:1; box-shadow:0 0 0 6px rgba(255,42,42,.07),0 0 16px rgba(255,42,42,.5)}
}
@keyframes fogMove{from{transform:translateY(-1%) translateX(-1.5%)}to{transform:translateY(1%) translateX(1.5%)}}
@keyframes walk1{0%,100%{transform:rotate(18deg)}50%{transform:rotate(-20deg)}}
@keyframes walk2{0%,100%{transform:rotate(-20deg)}50%{transform:rotate(18deg)}}
@keyframes walkA1{0%,100%{transform:rotate(-16deg)}50%{transform:rotate(14deg)}}
@keyframes walkA2{0%,100%{transform:rotate(14deg)}50%{transform:rotate(-16deg)}}
@keyframes bob{0%,100%{transform:translateX(-50%) translateY(0)}50%{transform:translateX(-50%) translateY(2px)}}
@keyframes objPulse{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}
@keyframes arrowUp{0%,100%{transform:translateY(0)}50%{transform:translateY(-3px)}}
@keyframes shake1{
  0%{transform:translate(0,0)}25%{transform:translate(-1px,1px)}50%{transform:translate(1px,-1px)}75%{transform:translate(-1px,0)}100%{transform:translate(0,0)}
}
@keyframes shake2{
  0%{transform:translate(0,0)}10%{transform:translate(-2px,1px)}20%{transform:translate(2px,-1px)}30%{transform:translate(-2px,-1px)}
  40%{transform:translate(2px,1px)}50%{transform:translate(-1px,1px)}60%{transform:translate(2px,0)}70%{transform:translate(-2px,0)}
  80%{transform:translate(1px,-1px)}90%{transform:translate(-1px,1px)}100%{transform:translate(0,0)}
}

@media (max-width:900px){ .journalGrid{grid-template-columns:repeat(3,minmax(0,1fr))} }
@media (max-width:760px){
  .doorsWall{gap:6px; width:min(96vw,600px)}
  .door{min-height:120px;padding:6px}
  .doorLabel{font-size:11px;padding:7px 4px}
  .stats{grid-template-columns:1fr}
  .world{min-height:54vh}
  .moveBtn{width:52px;height:52px}
  .journalGrid{grid-template-columns:repeat(2,minmax(0,1fr))}
  .goalBeacon{top:8px; left:8px; right:8px; transform:none; justify-content:center}
  .tamayRig{width:150px;height:132px}
}
